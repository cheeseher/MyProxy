<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Surge 配置使用手册 (By-Shane 版)</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fa-solid fa-bolt"></i>
                <span>Surge Config</span>
            </div>
            <span class="nav-author">By-Shane</span>
        </div>
    </nav>

    <!-- 头部区域 -->
    <header class="hero">
        <div class="container">
            <div class="author-badge">Designed by Shane</div>
            <h1>Surge 极致配置指南</h1>
            <p class="subtitle">专为极致体验打造 • 稳定 • 高速 • 纯净</p>
            <div class="hero-actions">
                <button class="btn btn-primary" onclick="copyConfigUrl()">
                    <i class="fa-solid fa-copy"></i> 复制配置链接
                </button>
                <a href="#import" class="btn btn-secondary">开始使用</a>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- 亮点展示 (Highlights) -->
        <section class="highlights">
            <div class="highlight-card">
                <div class="icon-box bg-blue"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                <h3>智能分流</h3>
                <p>自动识别 AI、流媒体与办公流量。ChatGPT 走美国，Zoom 走直连，即便在复杂的网络环境下也能游刃有余。</p>
            </div>
            <div class="highlight-card">
                <div class="icon-box bg-purple"><i class="fa-solid fa-phone-slash"></i></div>
                <h3>语音防断连</h3>
                <p>专为 Telegram 与 VoIP 优化。UDP 底层加强，拒绝通话中断，保持全天候稳定在线。</p>
            </div>
            <div class="highlight-card">
                <div class="icon-box bg-green"><i class="fa-solid fa-shield-halved"></i></div>
                <h3>纯净去广告</h3>
                <p>内置 MITM 证书逻辑与广告拦截规则，还原清爽的浏览体验，让你的设备更省电、更快速。</p>
            </div>
            <div class="highlight-card">
                <div class="icon-box bg-orange"><i class="fa-solid fa-server"></i></div>
                <h3>群晖 NAS 优化</h3>
                <p>针对 Synology Chat 与 NAS 服务深度调优。内网直连不绕路，外网访问更顺畅，办公效率倍增。</p>
            </div>
        </section>

        <!-- 1. 导入配置 -->
        <section id="import" class="card">
            <div class="card-header">
                <div class="icon-box bg-blue">
                    <i class="fa-solid fa-download"></i>
                </div>
                <h2>1. 导入配置</h2>
            </div>
            <div class="card-body">
                <p>您的专属托管配置链接：</p>
                <div class="code-block">
                    <code id="config-url">https://raw.githubusercontent.com/cheeseher/MyProxy/main/By-Shane.conf</code>
                    <button class="copy-btn" onclick="copyConfigUrl()" title="复制">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                </div>
                <div class="steps">
                    <h3><i class="fa-solid fa-list-ol"></i> 操作步骤</h3>
                    <ol>
                        <li>打开 Surge (iOS/Mac)</li>
                        <li>点击配置列表 -> <strong>从 URL 下载配置</strong> / <strong>安装托管配置</strong></li>
                        <li>粘贴上方链接并保存</li>
                        <li class="warning">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            <strong>重要：</strong>导入后，请务必修改配置中的 <code>[Proxy Group]</code> -> <code>我的订阅</code>，填入您的机场订阅地址。
                        </li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- 2. MITM 设置 -->
        <section id="mitm" class="card">
            <div class="card-header">
                <div class="icon-box bg-purple">
                    <i class="fa-solid fa-shield-halved"></i>
                </div>
                <h2>2. 关键设置：MITM (必读)</h2>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <i class="fa-solid fa-circle-info"></i>
                    <div>
                        <strong>为什么需要开启？</strong><br>
                        如果不开启 MITM，广告拦截、精准分流、脚本功能将全部<strong>失效</strong>。
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('ios')"><i class="fa-brands fa-apple"></i> iOS 设置</button>
                    <button class="tab-btn" onclick="switchTab('mac')"><i class="fa-solid fa-laptop"></i> Mac 设置</button>
                </div>

                <div id="ios-content" class="tab-content active">
                    <ol class="step-list">
                        <li>在 Surge 首页点击 <strong>"MitM"</strong> 模块</li>
                        <li>点击 <strong>"配置根证书"</strong> -> <strong>"生成新的 CA 证书"</strong></li>
                        <li>点击 <strong>"安装证书"</strong>，跳转 Safari 下载</li>
                        <li>前往 iOS <strong>设置</strong> -> <strong>已下载的描述文件</strong> -> 安装证书</li>
                        <li class="highlight">前往 iOS <strong>设置</strong> -> <strong>通用</strong> -> <strong>关于本机</strong> -> <strong>证书信任设置</strong> -> 开启 Surge 证书信任开关</li>
                    </ol>
                </div>

                <div id="mac-content" class="tab-content">
                    <ol class="step-list">
                        <li>点击 Surge 菜单栏图标 -> <strong>Dashboard</strong></li>
                        <li>左侧栏选择 <strong>"MitM"</strong></li>
                        <li>点击 <strong>"配置根证书"</strong> -> <strong>"安装证书"</strong></li>
                        <li>在“钥匙串访问”中找到 Surge 证书，双击 -> <strong>信任</strong> -> 选择 <strong>"始终信任"</strong></li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- 3. 策略组指南 -->
        <section id="policy" class="card">
            <div class="card-header">
                <div class="icon-box bg-green">
                    <i class="fa-solid fa-layer-group"></i>
                </div>
                <h2>3. 策略组选择指南</h2>
            </div>
            <div class="card-body">
                <h3>🌟 核心策略组 (Core)</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>策略组</th>
                                <th>推荐选择</th>
                                <th>说明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>🚀 节点选择</td>
                                <td><span class="badge auto">♻️ 自动选择</span></td>
                                <td>主流量入口</td>
                            </tr>
                            <tr>
                                <td>🤖 人工智能</td>
                                <td><span class="badge auto">♻️ 自动选择</span></td>
                                <td>ChatGPT 等，遇限区可锁美国</td>
                            </tr>
                            <tr>
                                <td>📲 电报消息</td>
                                <td><span class="badge manual">🇸🇬 新加坡节点</span></td>
                                <td><strong>防断连核心</strong>，建议锁定新加坡/香港</td>
                            </tr>
                            <tr>
                                <td>🎬 国际媒体</td>
                                <td><span class="badge auto">♻️ 自动选择</span></td>
                                <td>YouTube, Netflix 等</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="mt-4">💼 办公与开发 (Work & Dev)</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>策略组</th>
                                <th>推荐选择</th>
                                <th>说明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>📹 Zoom会议</td>
                                <td><span class="badge direct">🎯 全局直连</span></td>
                                <td>国内直连最稳，卡顿切香港</td>
                            </tr>
                            <tr>
                                <td>💬 群晖办公</td>
                                <td><span class="badge direct">🎯 全局直连</span></td>
                                <td>访问公司 NAS</td>
                            </tr>
                            <tr>
                                <td>🍎 苹果服务</td>
                                <td><span class="badge direct">🎯 全局直连</span></td>
                                <td>App Store 下载加速</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 4. 连通性模块 -->
        <section id="modules" class="card">
            <div class="card-header">
                <div class="icon-box bg-orange">
                    <i class="fa-solid fa-plug"></i>
                </div>
                <h2>4. 连通性测试面板</h2>
            </div>
            <div class="card-body">
                <p>内置模块支持真实地区检测（ChatGPT/Google）与精美排版。</p>
                <div class="module-install">
                    <div class="code-block">
                        <code id="module-url">https://cdn.jsdelivr.net/gh/cheeseher/MyProxy@main/Modules/Connectivity-Test.sgmodule</code>
                        <button class="copy-btn" onclick="copyModuleUrl()" title="复制">
                            <i class="fa-regular fa-copy"></i>
                        </button>
                    </div>
                    <p class="install-tip">复制上方链接，在 Surge -> <strong>模块</strong> -> <strong>安装新模块</strong> 中粘贴即可。</p>
                </div>
            </div>
        </section>

        <!-- 5. Q&A -->
        <section id="qa" class="card">
            <div class="card-header">
                <div class="icon-box bg-red">
                    <i class="fa-solid fa-circle-question"></i>
                </div>
                <h2>5. 常见问题 (Q&A)</h2>
            </div>
            <div class="card-body">
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Telegram 语音偶尔会断？</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>请检查 <code>电报消息</code> 策略组是否选了 <code>自动选择</code>。建议手动选择一个固定的 <code>新加坡</code> 节点，并确保节点支持 UDP。</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>看不到“全局直连”选项？</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>这是配置的中文别名。如果您只看到 <code>DIRECT</code>，说明配置未更新，请长按配置 -> <strong>立即更新</strong>。</p>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>GitHub 上传代码慢？</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>终端需手动设置代理：<br><code>export https_proxy=http://127.0.0.1:6152</code></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Made with <i class="fa-solid fa-heart" style="color: #FF3B30;"></i> by <strong>Shane</strong></p>
        <p class="small">&copy; 2024 Surge Config Manual. All rights reserved.</p>
    </footer>

    <script>
        function copyConfigUrl() {
            const url = document.getElementById('config-url').innerText;
            navigator.clipboard.writeText(url).then(() => {
                alert('配置链接已复制！');
            });
        }

        function copyModuleUrl() {
            const url = document.getElementById('module-url').innerText;
            navigator.clipboard.writeText(url).then(() => {
                alert('模块链接已复制！');
            });
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            if (tab === 'ios') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('ios-content').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('mac-content').classList.add('active');
            }
        }

        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('i');
            
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                icon.style.transform = 'rotate(180deg)';
            }
        }
    </script>
</body>
</html>
